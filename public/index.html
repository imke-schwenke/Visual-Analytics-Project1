<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>VA Exercise 1</title>
        <link
            rel="icon"
            type="image/x-icon"
            href="visva_sitelogo_no_white.png"
        />
        <link href="main.css" rel="stylesheet" />
        <script src="https://d3js.org/d3.v7.min.js"></script>

        <script src="https://unpkg.com/@saehrimnir/druidjs"></script>
    </head>

    <body>
        <div class = container>
        <div class="header">
            <img
                class="logo"
                id="logo"
                onclick="window.open('https://visva.cs.uni-koeln.de', '_blank')"
                src="visva_sitelogo_no_white.png"
            />
            <div class="title">
                <h3>VA Project 1</h3>
                <h8
                    >by Linus Lange, Jieyu Fu, Frederik Schmeisser and Imke
                    Schwenke</h8
                >
            </div>

            <div class="buttons" style="display: inline; align-items: center">
                <button class="tablinks" onclick="changeInfo(event, 'General')">
                    Amount over the Years
                </button>
                <button class="tablinks" onclick="changeInfo(event, 'Details')">
                    Rating per Duration
                </button>
                <button
                    class="tablinks"
                    onclick="changeInfo(event, 'Details2')"
                >
                    Get LDA
                </button>
                <button
                    class="tablinks"
                    onclick="changeInfo(event, 'Details3')"
                >
                    Game Length Cluster
                </button>
                <button
                    class="tablinks"
                    onclick="changeInfo(event, 'PageRankTab')"
                >
                    Pagerank
                </button>
            </div>
        </div>

        <div class="sidePanel" id="sidePanel">
            <div class="filter" id="filter" style="visibility: hidden;">
                <span class="closebtn" onclick="closeFilter(); closeFilterForPagerank()">&times;</span> 
                <p>Boardgames mit Pagerank</p>
                <p>von <span id="minValue"></span> bis <span id="maxValue"></span></p> 
              </div>

        </div>

        <div class="mainContent">
                <div id="legend">
                    <input
                        type="checkbox"
                        id="cbShort"
                        onclick="updateVisualization();"
                    />
        
                    Short Games (0-60min) <br />
        
                    <input
                        type="checkbox"
                        id="cbMedium"
                        onclick="updateVisualization();"
                    />
        
                    Medium Games (61-90min) <br />
        
                    <input
                        type="checkbox"
                        id="cbLong"
                        onclick="updateVisualization();"
                    />
                    Long Games (>90min)
                </div>
        
                <div id="zoomButtons">
                    Zoom:
                    <input
                        type="text"
                        id="zoomText"
                        name="zoomText"
                        value="0/8"
                        readonly
                    />
                    <button id="zoom+" onclick="updateScale(1)">+</button>
                    <button id="zoom-" onclick="updateScale(-1)">-</button>
                </div>
    
                <!-- Canvas for first vis -->
                <div id="General" class="tabcontent">
                    <div id="canvas"></div>
                </div>
        
                <!-- Canvas for second vis -->
                <div id="Details" class="tabcontent" style="display: none">
                    <div id="canvas2"></div>
                </div>
        
                <!-- Canvas for LDA -->
                <div id="Details2" class="tabcontent" style="display: none">
                    <div id="canvas3"></div>
                </div>
                <!-- Canvas for Clustering -->
                <div id="Details3" class="tabcontent" style="display: none">
                    <div id="canvas4"></div>
                </div>
    
                <!-- Canvas for Pagerank -->
                <div
                    id="PageRankTab"
                    class="tabcontent"
                    style="display: none; overflow: auto"
                >
                    <div id="canvas6">
                        <div id="loading">Loading...</div>
        
                        <aside style="padding-top: 0">
                            <div id="pagerankLegend" style="padding-bottom: 20px">
                                <h1>Legend</h1>
                                <img id="greenCircleImg" src="greenCircle.png" alt="" />
                                <span>Boardgame (hover to display pagerank)</span>
                                <img id="lineImg" src="line.png" alt="" />
                                <span>Recommendation </span>
                            </div>
        
                            <hr />
        
                            <h1>Pagerank Filter</h1>
                            <div id="pagerankFilter">
                                <div>
                                    <span> Min: </span>
                                    <span id="minPagerank"> 0 </span>
                                    <br />
                                    <span> Max: </span>
                                    <span id="maxPagerank"> 32 </span>
                                </div>
        
                                <div>
                                    <span>0</span>
                                    <input
                                        type="range"
                                        name="pagerankSliderMin"
                                        id="sliderMin"
                                        value="0"
                                        min="0"
                                        max="32"
                                    />
                                    <span>32</span>
        
                                    <br />
        
                                    <span>0</span>
                                    <input
                                        type="range"
                                        name="pagerankSliderMax"
                                        id="sliderMax"
                                        value="32"
                                        min="0"
                                        max="32"
                                    />
                                    <span>32</span>
                                </div>
                            </div>
        
                            <div style="padding-top: 20px; text-align: left">
                                <input
                                    type="radio"
                                    name="rbLinks"
                                    id="incoming"
                                    value="incoming"
                                    onchange="processPageRankData(sliderMin.value, sliderMax.value)"
                                />
                                Incoming
                                <input
                                    type="radio"
                                    name="rbLinks"
                                    id="outgoing"
                                    value="outgoing"
                                    onchange="processPageRankData(sliderMin.value, sliderMax.value)"
                                />
                                Outgoing
                                <span style="padding-left: 30px"> links shown</span>
                            </div>
                        </aside>
                </div>
            </div>

        </div>
    </div>

        

        <script>
            // EventListener hinzufügen
            window.addEventListener('load', function () {
                // Range-Slider in Variable speichern
                var sliderMin = document.getElementById('sliderMin');
                var sliderMax = document.getElementById('sliderMax');

                // EventListener für das Verändern des SlidersMin hinzufügen
                sliderMin.addEventListener('change', function () {
                    if (Number(this.value) > Number(sliderMax.value)) {
                        this.value = Number(
                            document.getElementById('minPagerank').innerHTML
                        );
                        alert('Min cant be greater than max value.');
                        return;
                    }
                    // Testelement verschieben, indem Inline-Styles eingefügt werden
                    document.getElementById('minPagerank').innerHTML =
                        this.value;
                        createFilter(this.value, sliderMax.value);
                        processPageRankData(sliderMin.value, this.value);
                });

                // EventListener für das Verändern des SlidersMax hinzufügen
                sliderMax.addEventListener('change', function () {
                    if (Number(this.value) < Number(sliderMin.value)) {
                        this.value = Number(
                            document.getElementById('maxPagerank').innerHTML
                        );
                        alert('Max cant be smaller than min value.');
                        // console.log(document.getElementById('maxPagerank'));

                        return;
                    }
                    // Testelement verschieben, indem Inline-Styles eingefügt werden
                    document.getElementById('maxPagerank').innerHTML =
                        this.value;
                    createFilter(sliderMin.value, this.value);
                    processPageRankData(sliderMin.value, this.value);
                });
            });
        </script>

        <script>
            window.onload = onPageLoad();

            function onPageLoad() {
                document.getElementById('cbShort').checked = true;
                document.getElementById('cbMedium').checked = true;
                document.getElementById('cbLong').checked = true;
                document.getElementById('zoomButtons').style.visibility =
                    'hidden';

                document.getElementById('incoming').checked = true;
            }
        </script>

        <script src="https://d3js.org/d3.v7.min.js"></script>
        <script src="/socket.io/socket.io.js"></script>

        <script src="pagerank.js" defer></script>

        <!--<script src="LDA.js"></script>-->
        <script src="index.js"></script>
        <!-- kmeans -->
        <script src="kmeans.js"></script>
        <!-- draw vis -->
        <script src="app.js"></script>
    </body>
</html>
